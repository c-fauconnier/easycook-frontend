<section class="my-5">
    <div class="container">
        <div class="row d-flex justify-content-center">
            <div class="col-lg-12 col-xl-11">
                <div class="card text-black" style="border-radius: 25px">
                    <div class="card-body p-md-5">
                        <div class="row justify-content-center">
                            <div class="col-md-10 col-lg-6 col-xl-5 order-2 order-lg-1">
                                <p class="text-center h1 fw-bold mb-5 mx-1 mx-md-4 mt-4">Modification du profil</p>

                                <form [formGroup]="updateForm" class="mx-1 mx-md-4">
                                    <div class="form-floating mb-3">
                                        <input
                                            formControlName="name"
                                            type="text"
                                            class="form-control"
                                            id="name"
                                            placeholder="********"
                                            required
                                        />
                                        <label for="name">Nom</label>
                                    </div>

                                    <div class="form-floating mb-3">
                                        <input
                                            formControlName="surname"
                                            type="text"
                                            class="form-control"
                                            id="surname"
                                            placeholder="********"
                                            required
                                        />
                                        <label for="surname">Prénom</label>
                                    </div>

                                    <div class="form-floating mb-3">
                                        <input
                                            formControlName="nickname"
                                            type="text"
                                            class="form-control"
                                            id="nickname"
                                            placeholder="********"
                                            required
                                        />
                                        <label for="nickname"
                                            >Pseudo
                                            <i
                                                class="bi bi-info-circle-fill pe-auto"
                                                matTooltip="Le nom avec lequel les autres utilisateurs vous verront."
                                                [matTooltipPosition]="'above'"
                                            ></i
                                        ></label>
                                    </div>

                                    <div class="form-floating mb-3">
                                        <input
                                            formControlName="email"
                                            type="email"
                                            class="form-control"
                                            id="email"
                                            placeholder="name@example.com"
                                            required
                                        />
                                        <label for="email">Adresse mail</label>
                                    </div>
                                    <div class="error-text mb-3" *ngIf="email.errors?.email">Veuillez entrer une adresse email valide.</div>

                                    <div class="error-text mb-3" *ngIf="updateError.length > 0">{{ updateError }}</div>
                                    <div class="d-flex justify-content-center mx-4 mb-3 mb-lg-4">
                                        <button
                                            (click)="update()"
                                            class="btn btn-primary btn-lg"
                                            [disabled]="loading || updateForm.invalid"
                                        >
                                            Sauvegarder
                                        </button>
                                    </div>
                                    <div class="d-flex justify-content-center">
                                        <div *ngIf="loading" class="spinner-grow text-primary mb-3" role="status">
                                            <span class="visually-hidden">Loading...</span>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div class="row justify-content-center">
                            <div class="col-md-10 col-lg-6 col-xl-5 order-2 order-lg-1">
                                <p class="text-center h1 fw-bold mb-5 mx-1 mx-md-4 mt-4">Modification du mot de passe</p>
                                <form [formGroup]="passwordForm" class="mx-1 mx-md-4">
                                    <div class="form-floating mb-3">
                                        <input
                                            formControlName="password"
                                            type="password"
                                            class="form-control"
                                            id="password"
                                            placeholder="********"
                                            required
                                        />
                                        <label for="password"
                                            >Mot de passe
                                            <i
                                                class="bi bi-info-circle-fill pe-auto"
                                                matTooltip="Doit contenir 1 majuscule, 1 minuscule, 1 chiffre et minimum 8 caractères."
                                                [matTooltipPosition]="'above'"
                                            ></i
                                        ></label>
                                    </div>
                                    <div class="error-text mb-3" *ngIf="password.errors?.passwordStrength">
                                        Votre mot de passe doit être composé d'une majuscule, une minuscule, d'un chiffre et d'une longueur
                                        de 8 caractères minimum.
                                    </div>
                                    <div class="form-floating mb-3">
                                        <input
                                            formControlName="confirmPassword"
                                            type="password"
                                            class="form-control"
                                            id="confirmPassword"
                                            placeholder="********"
                                            required
                                        />
                                        <label for="confirmPassword">Confirmation du mot de passe</label>
                                    </div>
                                    <div class="error-text mb-3" *ngIf="passwordForm.errors?.confirmEqual">
                                        Vérifiez que vous avez écrit correctement votre mot de passe.
                                    </div>
                                    <div class="d-flex justify-content-center mx-4 mb-3 mb-lg-4">
                                        <button
                                            (click)="updatePassword()"
                                            class="btn btn-primary btn-lg"
                                            [disabled]="loading || passwordForm.invalid"
                                        >
                                            Sauvegarder
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
